/*! grafana - v1.8.1 - 2014-09-30
 * Copyright (c) 2014 Torkel Ã–degaard; Licensed Apache License */

define(["kbn","lodash"],function(a,b){function c(){var a=this;this.datasource={},this.annotationsSrv={},this.timeSrv=new f,this.templateSrv=new g,this.datasourceSrv={getMetricSources:function(){},get:function(){return a.datasource}},this.providePhase=function(){return module(function(b){b.value("datasourceSrv",a.datasourceSrv),b.value("annotationsSrv",a.annotationsSrv),b.value("timeSrv",a.timeSrv),b.value("templateSrv",a.templateSrv)})},this.createControllerPhase=function(b){return inject(function(c,d,f){a.scope=d.$new(),a.scope.panel={},a.scope.row={panels:[]},a.scope.dashboard={},a.scope.dashboardViewState=new e,d.colors=[];for(var g=0;50>g;g++)d.colors.push("#"+g);a.$q=f,a.scope.skipDataOnInit=!0,a.controller=c(b,{$scope:a.scope})})}}function d(){var a=this;a.templateSrv=new g,a.timeSrv=new f,a.datasourceSrv={},a.$routeParams={},this.providePhase=function(c){return module(function(d){b.each(c,function(b){d.value(b,a[b])})})},this.createService=function(b){return inject(function(c,d,e,f){a.$q=c,a.$rootScope=d,a.$httpBackend=e,a.$rootScope.onAppEvent=function(){},a.$rootScope.emitAppEvent=function(){},a.service=f.get(b)})}}function e(){this.registerPanel=function(){}}function f(){this.time={from:"now-1h",to:"now"},this.timeRange=function(b){return b===!1?this.time:{from:a.parseDate(this.time.from),to:a.parseDate(this.time.to)}},this.replace=function(a){return a}}function g(){this.variables=[],this.templateSettings={interpolate:/\[\[([\s\S]+?)\]\]/g},this.data={},this.replace=function(a){return b.template(a,this.data,this.templateSettings)},this.init=function(){},this.updateTemplateData=function(){},this.variableExists=function(){return!1},this.highlightVariablesAsHtml=function(a){return a},this.setGrafanaVariable=function(a,b){this.data[a]=b}}return{ControllerTestContext:c,TimeSrvStub:f,ServiceTestContext:d}});